---
layout: single
title:  "네트워킹"
excerpt: "네트워킹"

categories: Java
tags:  Java

permalink: /categories/네트워킹/ # url

toc: true
toc_sticky: true

date: 2023-12-29
last_modified_at: 2023-12-30
---

# 네트워크 
# 네트워크 데이터 입력 및 출력

```
네트워크 대상(객체) 사이에 입/출력(InputStream, OutputStream)를 이용해서 데이터를 입력하고 출력한다.
대상A <- 입력(InputStream) 대상B
대상A 출력(OutputStream) -> 대상B
```

# 소켓

``` 
네트워크상에서 데이터를 주고받기 위한 장치이다.
대상A [socket] <- 입력(InputStream) 대상B [socket]
대상A [socket] 출력(OutputStream) -> 대상B [socket]

서버는 클라이언트를 맞을 준비를 하고 있다가 클라이언트의 요청에 반응한다.
(클라이언트)대상A [socket] -> (서버)대상B [server socket]
```

```java
package pjtTest;

import java.net.ServerSocket;
import java.net.Socket;

public class MainClass {
	public static void main(String[] args) {
		
		ServerSocket serverSocket = null;
		Socket socket = null;
		
		try {
			
			serverSocket = new ServerSocket(9000);
			System.out.println("클라이언트 맞을 준비 완료!!");
			
			socket = serverSocket.accept();
			System.out.println("클라이언트 연결");
			System.out.println("socket : " + socket);
		} catch (Exception e) {
			e.printStackTrace();
		} finally {
			try {
				if(socket != null) socket.close();
				if(serverSocket != null) serverSocket.close();
			} catch (Exception e) {
				e.printStackTrace();
			}
		}
	}
}
```
    클라이언트 맞을 준비 완료!!
    클라이언트 연결
    socket : Socket[addr=/0:0:0:0:0:0:0:1,port=60143,localport=9000]
    
# Client와 Server 소켓(Socket)

```
서버에 ServerSocket를 준비하고 클라이언트에서 Socket를 이용해서 접속한다.
```
# 클라이언트

```java
package pjtTest;

import java.io.IOException;
import java.net.Socket;

public class MainClassSocket {
	public static void main(String[] args) {
		
		Socket socket = null;
		
		try {
			socket = new Socket("localhost", 9000); //127.0.0.1
			System.out.println("서버 연결!!");
			System.out.println("socket : " + socket);
		} catch (IOException e) {
			e.printStackTrace();
		} finally {
			try {
				if(socket != null) socket.close();
			} catch (Exception e) {
				e.printStackTrace();
			}
		}
	}
}
```
    서버 연결!!
    socket : Socket[addr=localhost/127.0.0.1,port=9000,localport=60339]

# 서버

```java
package pjtTest;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

public class MainClassServerSocket {
	public static void main(String[] args) {
		
		ServerSocket serverSocket = null;
		Socket socket = null;
		
		try {
			serverSocket = new ServerSocket(9000);
			System.out.println("클라이언트 맞을 준비 완료!!");
			
			socket = serverSocket.accept();
			System.out.println("클라이언트 연결!!");
			System.out.println("socket : " + socket);
		} catch (IOException e) {
			e.printStackTrace();
		} finally {
			try {
				if(socket != null) socket.close();
				if(serverSocket != null) serverSocket.close();
			} catch (IOException e) {
				e.printStackTrace();
			}
		}
	}
}
```
    클라이언트 맞을 준비 완료!!
    클라이언트 연결!!
    socket : Socket[addr=/127.0.0.1,port=60339,localport=9000]

# 양방향 통신

```
클라이언트와 서버는 InputStream, OutputStream을 이용해서 양뱡향 통신을 할 수 있다.
```

# 클라이언트

```java
package pjtTest;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.Socket;
import java.util.Scanner;

public class ClientClass {
	public static void main(String[] args) {
		
		Socket socket = null;
		
		OutputStream outputStream = null;
		DataOutputStream dataOutputStream = null;
		
		InputStream inputStream = null;
		DataInputStream dataInputStream = null;
		
		Scanner scanner = null;
		
		try {
			
			socket = new Socket("localhost", 9000);
			System.out.println("서버 연결 완료!!");
			
			outputStream = socket.getOutputStream();
			dataOutputStream = new DataOutputStream(outputStream);
			
			inputStream = socket.getInputStream();
			dataInputStream = new DataInputStream(inputStream);
			
			scanner = new Scanner(System.in);
			
			while(true) {
				System.out.println("메시지 입력 : ");
				String outMessage = scanner.nextLine();
				dataOutputStream.writeUTF(outMessage);
				dataOutputStream.flush();
				
				String inMessage = dataInputStream.readUTF();
				System.out.println("inMessage : " + inMessage);
				
				if(outMessage.equals("STOP")) break;
			}
		} catch (Exception e) {
			e.printStackTrace();
		} finally {
			try {
				
				if(dataOutputStream != null) dataOutputStream.close();
				if(outputStream != null) outputStream.close();
				if(dataInputStream != null) dataInputStream.close();
				if(inputStream != null) inputStream.close();
				
				if(socket != null) socket.close();
			} catch (Exception e) {
				e.printStackTrace();
			}
		}
	}
}
```
    서버 연결 완료!!
    메시지 입력 : 
    안녕! 나는 석승민이야!
    inMessage : 안녕! 나는 서버 석승민이야!
    메시지 입력 : 
    반가워 ! 서버 석승민!
    inMessage : 반가워 클라이언트 석승민!
    메시지 입력 : 
    STOP
    inMessage : STOP

# 서버

```java
package pjtTest;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;

public class ServerClass {
    public static void main(String[] args) {
       
    	ServerSocket serverSocket = null;
        Socket socket = null;
        
        InputStream inputStream = null;
        DataInputStream dataInputStream = null;
        
        OutputStream outputStream = null;
        DataOutputStream dataOutputStream = null;
        
        Scanner scanner = null;

        try {
            serverSocket = new ServerSocket(9000);
            System.out.println("클라이언트 맞을 준비 완료!!");
            socket = serverSocket.accept();
            System.out.println("클라이언트 연결!!");
            System.out.println("socket : " + socket);
            inputStream = socket.getInputStream();
            dataInputStream = new DataInputStream(inputStream);
            outputStream = socket.getOutputStream();
            dataOutputStream = new DataOutputStream(outputStream);
            
            scanner = new Scanner(System.in);

            while (true) {
                String clientMessage = dataInputStream.readUTF();
                System.out.println("clientMessage : " + clientMessage);

                System.out.println("메시지 입력 : ");
				String outMessage = scanner.nextLine();
				dataOutputStream.writeUTF(outMessage);
				dataOutputStream.flush();
				
//                dataOutputStream.writeUTF("메시지 전송 완료!!");
//                dataOutputStream.flush();

                if (clientMessage.equals("STOP")) {
                    break;
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                if (dataOutputStream != null) dataOutputStream.close();
                if (outputStream != null) outputStream.close();
                if (dataInputStream != null) dataInputStream.close();
                if (inputStream != null) inputStream.close();
                if (socket != null) socket.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}
```
    클라이언트 맞을 준비 완료!!
    클라이언트 연결!!
    socket : Socket[addr=/127.0.0.1,port=61003,localport=9000]
    clientMessage : 안녕! 나는 석승민이야!
    메시지 입력 : 
    안녕! 나는 서버 석승민이야!
    clientMessage : 반가워 ! 서버 석승민!
    메시지 입력 : 
    반가워 클라이언트 석승민!
    clientMessage : STOP
    메시지 입력 : 
    STOP
