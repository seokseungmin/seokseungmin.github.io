---
layout: single
title: "생명주기"
excerpt: "생명주기"

categories: Spring
tags: Spring

permalink: /categories/생명주기/ # url

toc: true
toc_sticky: true

date: 2024-01-09
last_modified_at: 2024-01-09
---

# 생명주기

## 스프링 컨테이너 생명주기
<center><img src="/assets/images/posts_img/readme/스프링컨테이너생명주기.png" width="100%" height="100%"></center>

## 빈 객체 생명주기

<center><img src="/assets/images/posts_img/readme/빈객체생명주기.png" width="100%" height="100%"></center>

### BookDao.java

```java
package com.brms.book.dao;

import java.util.HashMap;
import java.util.Map;

import org.springframework.beans.factory.DisposableBean;
import org.springframework.beans.factory.InitializingBean;

import com.brms.book.Book;

public class BookDao implements InitializingBean, DisposableBean {

	private Map<String, Book> bookDB = 
			new HashMap<String, Book>();
	
	public void insert(Book book) {
		bookDB.put(book.getbNum(), book);
	}
	
	public Book select(String bNum) {
		return bookDB.get(bNum);
	}
	
	public void update(Book book) {
		
	}
	
	public void delete() {
		
	}
	
	public Map<String, Book> getBookDB() {
		return bookDB;
	}

	@Override
	public void afterPropertiesSet() throws Exception {
		System.out.println("빈(Bean)객체 생성 단계");
	}

	@Override
	public void destroy() throws Exception {
		System.out.println("빈(Bean)객체 소멸 단계");
	}
	
}
```

## init-method, destroy-method
<center><img src="/assets/images/posts_img/readme/init,destroy-method.png" width="100%" height="100%"></center>

### BookRegisterService.java

```java
package com.brms.book.service;

import org.springframework.beans.factory.annotation.Autowired;

import com.brms.book.Book;
import com.brms.book.dao.BookDao;

public class BookRegisterService {

	@Autowired
	private BookDao bookDao;
	
	public BookRegisterService() { }
	
	public void register(Book book) {
		bookDao.insert(book);
	}
	
	public void initMethod() {
		System.out.println("BookRegisterService 빈(Bean)객체 생성 단계");
	}
	
	public void destroyMethod() {
		System.out.println("BookRegisterService 빈(Bean)객체 소멸 단계");
	}
}
```

### appCtx.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
 		http://www.springframework.org/schema/beans/spring-beans.xsd 
 		http://www.springframework.org/schema/context 
 		http://www.springframework.org/schema/context/spring-context.xsd">

	<context:annotation-config />

	<bean id="bookDao" class="com.brms.book.dao.BookDao" />
	<bean id="bookRegisterService" class="com.brms.book.service.BookRegisterService" 
	init-method="initMethod" destroy-method="destroyMethod"/>
	<bean id="bookSearchService" class="com.brms.book.service.BookSearchService" />

	<bean id="memberDao" class="com.brms.member.dao.MemberDao" />
	<bean id="memberRegisterService" class="com.brms.member.service.MemberRegisterService" />
	<bean id="memberSearchService" class="com.brms.member.service.MemberSearchService" />

</beans>
```
