---
layout: single
title:  "객체와 메모리"
excerpt: "객체와 메모리"

categories: Java
tags:  Java

permalink: /categories/2023-12-29-객체와 메모리/ # url

toc: true
toc_sticky: true

date: 2023-12-29
last_modified_at: 2023-12-30
---

# 객체와 메모리 
메모리에서 객체 생성(동적 생성)
객체는 메모리에서 동적으로 생성되며, 객체가 더 이상 필요 없게 되면 GC(Gabage Collector)에 의해서 제거된다.

# 레퍼런스(가리킨다)
생성한 객체의 주소를 변수에 저장하는 것을 레퍼런스라고 한다.

```Java
public class MainClass {
	public static void main(String[] args) {
			
		ObjectClass obj1 = new ObjectClass();
		ObjectClass obj2 = new ObjectClass();
		ObjectClass obj3 = new ObjectClass();
		
		System.out.println("obj1 ----> " + obj1);
		System.out.println("obj2 ----> " + obj2);
		System.out.println("obj3 ----> " + obj3);
	}
}
```
    obj1 ----> pjtTest.ObjectClass@15db9742
    obj2 ----> pjtTest.ObjectClass@6d06d69c
    obj3 ----> pjtTest.ObjectClass@7852e922

# 자료형이 같아도 다른 객체
자료형이 같아도 다른 공간에 존재하는 객체는 다른 객체이다.
```Java
public class MainClass {
	public static void main(String[] args) {
			
		ObjectClass obj1 = new ObjectClass();
		ObjectClass obj2 = new ObjectClass();
		ObjectClass obj3 = new ObjectClass();
		
		System.out.println("obj1 ----> " + obj1);
		System.out.println("obj2 ----> " + obj2);
		System.out.println("obj3 ----> " + obj3);
		
		if(obj1 == obj2) {
			System.out.println("obj1 == obj2");
		}else {
			System.out.println("obj1 != obj2");
		}
		
		if(obj2 == obj3) {
			System.out.println("obj2 == obj3");
		}else {
			System.out.println("obj2 != obj3");
		}
		
		if(obj1 == obj3) {
			System.out.println("obj1 == obj3");
		}else {
			System.out.println("obj1 != obj3");
		}
	}
}
```
    obj1 ----> pjtTest.ObjectClass@15db9742
    obj2 ----> pjtTest.ObjectClass@6d06d69c
    obj3 ----> pjtTest.ObjectClass@7852e922
    obj1 != obj2
    obj2 != obj3
    obj1 != obj3

# null과 NullPointException
레퍼런스에 null 저장되면 객체의 연결이 끊기며, 더 이상 객체를 이용할 수 없다.
```Java
public class ObjectClass {
	public ObjectClass() {
		
	}
	
	public void getInfo() {
		System.out.println("-- getInfo --");
	}
}
```
```Java
public class MainClass {
	public static void main(String[] args) {
			
		ObjectClass obj1 = new ObjectClass();
		System.out.println("obj1 ----> " + obj1);
		obj1.getInfo();
		
		obj1 = null; //레퍼런스X 즉, 객체를 가리키지 않는 상태!
		System.out.println("obj1 ----> " + obj1);
		obj1.getInfo();
	}
}
```
    obj1 ----> pjtTest.ObjectClass@15db9742
    -- getInfo --
    obj1 ----> null
    Exception in thread "main" java.lang.NullPointerException
	  at pjtTest.MainClass.main(MainClass.java:12)

# 정리
클래스로부터 생성되는 객체들은 모두 다 다른공간에 존재한다.그리고 그 객체를 가리키는건 레퍼런스라고 한다. 
그리고 레퍼런스와 객체는 new라는 키워드로 연결되어 있지만, null이라는 것을 이용해서 끊어버리면 더이상 레퍼런스는 객체를 가리키고 있지 않다. 
가리키고 있지 않은 객체는 GC에 의해서 언젠간 회수가 되고, 그 레퍼런스도 더이상 누구를 가리키고 있지 않으니까, 더이상 객체의 속성과 메서드를 호출해서 접근을 할 수가 없다.
레퍼런스에 null을 주어도, 메모리에서 레퍼런스는 사라지지 않고 존재! 다시 이 레퍼런스에 다른 객체를 연결할 수 있음. 어떻게 연결해? new라는 키워드를 이용해서 다시 한번 동적으로 객체를 생성한 다음에 할당연산자를 활용해서 다시 연결할 수 있다.
