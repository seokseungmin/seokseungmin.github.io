---
layout: single
title: "웹 프로그래밍 설계 모델"
excerpt: "웹 프로그래밍 설계 모델"

categories: Spring
tags: Spring

permalink: /categories/웹 프로그래밍 설계 모델/ # url

toc: true
toc_sticky: true

date: 2024-01-11
last_modified_at: 2024-01-11
---

# 웹 프로그래밍 설계 모델

## 웹 프로그래밍을 구축하기 위한 설계 모델

<center><img src="/assets/images/posts_img/readme/Model1.png" width="100%" height="100%"></center>
<center><img src="/assets/images/posts_img/readme/Model2.png" width="100%" height="100%"></center>

```
모델 1 방식은 HTML 문서 안에 Java 코드와 태그를 혼합하여 사용하는 방식입니다.
이 방식의 장점은 개발 속도가 빠르지만, 유지보수가 어렵고 개발자의 스트레스가 증가할 수 있는 단점이 있습니다.

반면, 모델 2 방식은 MVC 패턴을 기반으로 하며, 컨트롤러, 서비스, DAO, 뷰를 분리하여 모듈화하는 방식입니다.
이 방식은 유지보수가 용이하고 기능별로 분리되어 있어 관리가 편리합니다. 현재 대부분의 웹 애플리케이션 프로젝트는 모델 2 방식을 따르며,
스프링 웹 애플리케이션 개발에도 이 모델이 기본적으로 사용됩니다.
```

## 스프링 MVC 프레임워크 설계 구조

<center><img src="/assets/images/posts_img/readme/MVC설계구조.png" width="100%" height="100%"></center>

```
스프링(Spring)에서는 Model 2 방식의 MVC 패턴을 사용하는 프레임워크를 채택하고 있습니다.
이 프레임워크의 설계 구조는 이해하는 것이 중요합니다. 처음에는 다소 복잡해 보일 수 있지만, 몇 번의 프로젝트를 거치면 이 구조가 자연스럽게 이해됩니다.

스프링 프레임워크의 구조는 다음과 같습니다:

클라이언트가 요청을 보내면, DispatcherServlet 클래스가 이를 받습니다. 
예를 들어, 날씨 정보 요청과 같은 요청이 이에 해당합니다.
DispatcherServlet은 HandlerMapping에 요청을 전달합니다. 
HandlerMapping은 여러 컨트롤러 중에서 가장 적합한 컨트롤러를 선택하는 역할을 합니다.
HandlerMapping이 선택한 컨트롤러는 DispatcherServlet으로 다시 전달되며, 이어서 HandlerAdapter에 요청됩니다. 
HandlerAdapter의 역할은 컨트롤러 내에서 요청에 가장 적합한 메소드를 찾는 것입니다.
메소드가 선택되고, 데이터 처리가 완료되면, 처리된 데이터(모델)는 다시 DispatcherServlet으로 전달됩니다.
DispatcherServlet은 ViewResolver에 이 데이터를 전달합니다. ViewResolver는 처리된 데이터에 맞는 적합한 JSP 페이지(뷰)를 선택합니다.
선택된 JSP 페이지는 클라이언트에게 응답으로 전송되고, HTTP 프로토콜에 따라 연결이 종료됩니다.
이 과정은 스프링 프레임워크에서의 한 사이클로 볼 수 있으며, 이해하기 위해 암기하는 것이 좋습니다. 
요약하자면, 클라이언트의 요청은 DispatcherServlet에 의해 받아지고, 적합한 컨트롤러와 메소드가 선택되어 최종적으로 처리된 데이터가 JSP 페이지를 통해 클라이언트에게 응답되는 과정입니다.
```

## DispatcherServlet 설정

<center><img src="/assets/images/posts_img/readme/DispatcherServlet.png" width="100%" height="100%"></center>
<center><img src="/assets/images/posts_img/readme/DispatcherServlet설정.png" width="100%" height="100%"></center>

## @Controller 

<center><img src="/assets/images/posts_img/readme/Controller객체.png" width="100%" height="100%"></center>

```
디스패처 서블릿은 웹 애플리케이션의 첫 번째 관문과 같습니다.
웹 애플리케이션 개발 시, 디스패처 서블릿을 설정해야 합니다. JSP를 사용하여 웹 환경을 구성할 때, web.xml 파일에서 서블릿 등록 및 초기 파라미터 설정을 합니다.
이에 대해 더 알고 싶으신 분들은 JSP나 서블릿에 관한 참고 문헌을 찾아보시기 바랍니다.

web.xml 파일에는 서블릿을 다음과 같이 등록합니다. 디스패처 서블릿을 등록할 때는,
스프링 프레임워크 패키지 내에 있는 DispatcherServlet 클래스를 사용합니다.
이를 앱 서블릿(App Servlet)이라는 별명으로 지어주고,
루트 URL에 대한 모든 요청을 처리하도록 설정합니다.

초기 파라미터에서는 contextConfigLocation을 지정하여 스프링 설정 파일을 연결합니다.
이 스프링 설정 파일은 앞서 학습한 스프링 설정에 해당합니다.
전체적인 웹 구조에서 클라이언트의 요청이 들어오면, 디스패처 서블릿이 첫 번째 관문으로 작동합니다.

디스패처 서블릿을 등록하고 나면, 스프링 설정 파일을 통해 스프링 컨테이너가 생성됩니다.
스프링 컨테이너 내부에는 HandlerMapping, HandlerAdapter, ViewResolver 등이 자동으로 생성됩니다. 개발자가 실제로 작업해야 하는 부분은 컨트롤러와 뷰뿐입니다.

만약 디스패처 서블릿을 등록하지만 초기 파라미터를 설정하지 않는 경우,
스프링 프레임워크는 자동으로 AppServlet/servlet-context.xml과 같은 특정 이름의 스프링 설정 파일을 사용합니다.

컨트롤 객체에 대해 알아볼 때, 컨트롤러는 디스패처 서블릿이 클라이언트로부터의 요청을 받은 후,
핸들러 맵핑과 핸들러 어댑터를 통해 데이터와 뷰를 관리하는 객체로 응답을 보냅니다.
컨트롤러는 개발자가 직접 만들어야 하며, 스프링 설정 파일에 annotation-driven 태그를 추가한 후,
클래스에 @Controller 어노테이션을 붙여서 사용합니다.
```
## @RequestMapping

<center><img src="/assets/images/posts_img/readme/RequestMapping.png" width="100%" height="100%"></center>

## Model 타입의파라미터

<center><img src="/assets/images/posts_img/readme/Model타입의파라미터.png" width="100%" height="100%"></center>

## View 객체

<center><img src="/assets/images/posts_img/readme/View객체.png" width="100%" height="100%"></center>

## 전체적인 웹프로그래밍 구조

<center><img src="/assets/images/posts_img/readme/전체적인 웹프로그래밍 구조.png" width="100%" height="100%"></center>

```
스프링 프레임워크에서 컨트롤러 객체의 리퀘스트 맵핑에 대해 알아보겠습니다.
디스패처 서블릿은 핸들러 어댑터를 통해 적합한 컨트롤러를 찾습니다. 컨트롤러는 클래스이며,
다수의 메소드를 포함할 수 있습니다.
사용자의 요청에 가장 적합한 메소드를 찾기 위해, 각 메소드에는 리퀘스트 맵핑 어노테이션이 붙어 있으며, 이 안에는 요청된 URL이 명시됩니다.
예를 들어, localhost:8090/success 같은 요청이 들어올 경우, @RequestMapping 어노테이션을 통해 해당 요청을 처리하는 메소드가 실행됩니다.

컨트롤러 모델 타입에 대해서도 살펴보겠습니다.
디스패처 서블릿, 핸들러 어댑터, 컨트롤러 뒤에는 서비스나 DAO 등이 위치할 수 있으며, 이들은 데이터베이스와 연동됩니다.
컨트롤러에서 작업이 완료되면, 모델 객체를 통해 데이터를 다시 디스패처 서블릿으로 전달합니다.
개발자는 모델 객체에 데이터를 담아 디스패처 서블릿에 전달할 수 있으며, 디스패처 서블릿은 적절한 뷰를 찾아 클라이언트에게 응답을 전송합니다.

뷰 객체에 대해서는, 디스패처 서블릿이 컨트롤러의 작업을 마친 후에 응답을 생성하기 위해 뷰 리졸버 객체에 위임합니다. 뷰 리졸버는 InternalResourceViewResolver를 사용하여 적절한 뷰를 찾습니다.
컨트롤러에서 반환된 값과 뷰 리졸버가 결합하여 최종적인 뷰 파일, 예를 들어 success.jsp를 찾습니다.

스프링 프레임워크에서의 전체적인 웹 어플리케이션 흐름은 다음과 같습니다:

클라이언트가 요청을 보냅니다 (예: localhost:8090/success).
디스패처 서블릿이 이 요청을 받아 처리합니다.
핸들러 맵핑이 적절한 컨트롤러를 찾습니다.
컨트롤러는 @RequestMapping 어노테이션을 통해 적절한 메소드를 실행합니다.
컨트롤러에서 처리된 데이터는 모델 객체에 담겨 디스패처 서블릿으로 반환됩니다.
디스패처 서블릿은 뷰 리졸버를 통해 적절한 뷰를 찾고, 모델 데이터를 이용해 최종 응답을 생성합니다.
이 과정은 스프링 프레임워크의 핵심 구성 요소인 디스패처 서블릿, 컨트롤러, 뷰 리졸버 등의 동작 방식을 포함합니다. 개발자는 주로 컨트롤러와 뷰에 집중하여 개발을 진행하게 됩니다.
```
