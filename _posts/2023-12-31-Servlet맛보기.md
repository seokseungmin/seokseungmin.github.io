---
layout: single
title:  "Servlet맛보기"
excerpt: "Servlet맛보기"

categories: Jsp
tags:  Jsp

permalink: /categories/2023-12-28-Servlet맛보기/ # url

toc: true
toc_sticky: true

date: 2023-12-31
last_modified_at: 2023-12-31
---

# Servlet 맛보기
JSP는 HTML 문서에 JSP코드를 삽입을 해서 확장자를 .jsp로 만들었지만,
기존의 HTML문서는 동적이지 않고 정적인 문서인 반면에, 확장자를 jsp로 바꾸고 jsp문법을 넣음으로써
웹 컨테이너에서 동적으로 사용자의 request에 반응하는 동적인 페이지를 만들수가 있었음.
중요한것은, jsp 페이지를 우리가 만들고, 웹 컨테이너에서는 우리가 만든 jsp 페이지를 가지고 XXX_jsp.java 파일을
만들었었고 이 자바 파일을 이용해서 컴파일과 링크 과정을 거쳐서 response해서 사용자에게 응답하는 과정을 거쳤음.
Servlet은 순수 자바 파일만 이용을 하게됨.

# 웹 컨테이너 구조
<center><img src="/assets/images/posts_img/readme/서블릿컨테이너.png" width="50%" height="50%"></center>

# Servlet 파일 작성
Project Explorer -> New -> Dynamic Web Project -> Project name : testPjt
Context Root 기본적으로 default로 프로젝트 이름과 동일하게됨. 
해당 프로그램, 웹 프로그램의 root라고 생각하면됨.
Content directory, 해당하는 웹 프로그램의 컨텐츠들이 어디에 모였는지 webapp 폴더에 모여있다 지정을 할수가 있음.
웹환경을 설정해주는  Generate web.xml deployment descriptor를 설정해줌.

<center><img src="/assets/images/posts_img/readme/서블릿프로젝트.png" width="50%" height="50%"></center>

web.xml 웹에 대한 환경설정을 하는 파일이라고 볼수 있겠음.

# Servlet 파일 작성
```Java
package com.testPjt;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class HelloServlet
 */
@WebServlet("/hs")
public class HelloServlet extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
    /**
     * @see HttpServlet#HttpServlet()
     */
    public HelloServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

	/**
	 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		response.getWriter().append("Served at: ").append(request.getContextPath());
	}

	/**
	 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		doGet(request, response);
	}

}
```

```Java
package com.testPjt;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class HelloServlet
 */
@WebServlet("/hs")
public class HelloServlet extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
    /**
     * @see HttpServlet#HttpServlet()
     */
    public HelloServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

	/**
	 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		response.getWriter().append("Served at: ").append(request.getContextPath());
		
		PrintWriter out = response.getWriter();
		out.print("<html>");
		out.print("<head>");
		out.print("<body>");
		out.print("<p>Hello Servlet!!</p>");
		out.print("</body>");
		out.print("</head>");
		out.print("</html>");
	}

	/**
	 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		doGet(request, response);
	}

}
```

<center><img src="/assets/images/posts_img/readme/서블릿실행.png" width="50%" height="50%"></center>
response로부터 PrintWriter라는 객체를 얻어내고 그 객체에 있는 print라는 메소드를 이용해서 
html방식으로 출력을 하는 과정을 나타낼 수가 있음.

# URL Mappings
@WebServlet("/hs"), 이 서블릿의 이름은 HelloServlet임.
이것은 도메인이나 디렉토리가 아니기 때문에 외부에서 HelloServlet을 요청을 할때,
HelloServlet을 어떻게 url창에다가 입력을 해야할지 찾아 들어가야 하는지 난감하겠죠?
```
http://localhost:8090/testPjt/hs
```
그래서 실제로 브라우저로 보면 Context path뒤에 /hs 라고 있죠?
이게 바로 url mapping이에요!
hs라고 입력해서 찾아들어오면 HelloServlet이 실행이 되게 하라는 것임.
보통 url매핑은 해당서블릿 이름과 동일하게 사용하는 경우는 드물고,
약간 축약해서, 심플하게 사용하는 경우가 많음!

# class파일 확인
```
파일경로 : C:\Users\Royse\eclipse-workspace\testPjt\build\classes\com\testPjt
```
<center><img src="/assets/images/posts_img/readme/class파일확인.png" width="50%" height="50%"></center>
<center><img src="/assets/images/posts_img/readme/servletcompile.png" width="50%" height="50%"></center>
